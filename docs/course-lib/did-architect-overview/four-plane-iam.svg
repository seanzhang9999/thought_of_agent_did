<svg viewBox="0 0 900 750" xmlns="http://www.w3.org/2000/svg">
  <!-- 背景 -->
  <rect width="900" height="750" fill="#f8f9fa"/>
  
  <!-- 标题 -->
  <text x="450" y="30" text-anchor="middle" font-size="24" font-weight="bold" fill="#2c3e50">IAM 四平面架构 (含DID身份平面)</text>
  
  <!-- 控制平面 -->
  <rect x="50" y="60" width="800" height="130" fill="#e3f2fd" stroke="#1976d2" stroke-width="2" rx="10"/>
  <text x="70" y="85" font-size="18" font-weight="bold" fill="#1976d2">控制平面 (Control Plane)</text>
  
  <!-- 控制平面组件 -->
  <rect x="80" y="100" width="100" height="35" fill="#bbdefb" stroke="#1976d2" rx="5"/>
  <text x="130" y="122" text-anchor="middle" font-size="11" fill="#0d47a1">策略管理</text>
  
  <rect x="200" y="100" width="100" height="35" fill="#bbdefb" stroke="#1976d2" rx="5"/>
  <text x="250" y="122" text-anchor="middle" font-size="11" fill="#0d47a1">身份管理</text>
  
  <rect x="320" y="100" width="100" height="35" fill="#bbdefb" stroke="#1976d2" rx="5"/>
  <text x="370" y="122" text-anchor="middle" font-size="11" fill="#0d47a1">配置管理</text>
  
  <rect x="440" y="100" width="100" height="35" fill="#bbdefb" stroke="#1976d2" rx="5"/>
  <text x="490" y="122" text-anchor="middle" font-size="11" fill="#0d47a1">审计配置</text>
  
  <rect x="560" y="100" width="100" height="35" fill="#bbdefb" stroke="#1976d2" rx="5"/>
  <text x="610" y="122" text-anchor="middle" font-size="11" fill="#0d47a1">治理规则</text>
  
  <rect x="680" y="100" width="100" height="35" fill="#bbdefb" stroke="#1976d2" rx="5"/>
  <text x="730" y="122" text-anchor="middle" font-size="11" fill="#0d47a1">Agent策略</text>
  
  <text x="80" y="155" font-size="10" fill="#1565c0">• 传统IAM策略 + DID治理规则</text>
  <text x="80" y="170" font-size="10" fill="#1565c0">• Agent身份生命周期管理</text>
  
  <!-- 身份平面 (新增) -->
  <rect x="50" y="210" width="800" height="130" fill="#f3e5f5" stroke="#7b1fa2" stroke-width="2" rx="10"/>
  <text x="70" y="235" font-size="18" font-weight="bold" fill="#7b1fa2">身份平面 (Identity Plane) - DID and Agent</text>
  
  <!-- 身份平面组件 -->
  <rect x="80" y="250" width="100" height="35" fill="#e1bee7" stroke="#7b1fa2" rx="5"/>
  <text x="130" y="272" text-anchor="middle" font-size="11" fill="#4a148c">DID管理</text>
  
  <rect x="200" y="250" width="100" height="35" fill="#e1bee7" stroke="#7b1fa2" rx="5"/>
  <text x="250" y="272" text-anchor="middle" font-size="11" fill="#4a148c">VC验证</text>
  
  <rect x="320" y="250" width="100" height="35" fill="#e1bee7" stroke="#7b1fa2" rx="5"/>
  <text x="370" y="272" text-anchor="middle" font-size="11" fill="#4a148c">密钥管理</text>
  
  <rect x="440" y="250" width="100" height="35" fill="#e1bee7" stroke="#7b1fa2" rx="5"/>
  <text x="490" y="272" text-anchor="middle" font-size="11" fill="#4a148c">信任网络</text>
  
  <rect x="560" y="250" width="100" height="35" fill="#e1bee7" stroke="#7b1fa2" rx="5"/>
  <text x="610" y="272" text-anchor="middle" font-size="11" fill="#4a148c">Agent协商</text>
  
  <rect x="680" y="250" width="100" height="35" fill="#e1bee7" stroke="#7b1fa2" rx="5"/>
  <text x="730" y="272" text-anchor="middle" font-size="11" fill="#4a148c">零知识证明</text>
  
  <text x="80" y="305" font-size="10" fill="#6a1b9a">• W3C DID标准实现</text>
  <text x="80" y="320" font-size="10" fill="#6a1b9a">• Agent自主身份建立和信任协商</text>
  
  <!-- 数据平面/网络平面 -->
  <rect x="50" y="360" width="800" height="130" fill="#e8f5e8" stroke="#388e3c" stroke-width="2" rx="10"/>
  <text x="70" y="385" font-size="18" font-weight="bold" fill="#388e3c">数据平面/网络平面 (Data/Network Plane)</text>
  
  <!-- 数据平面组件 -->
  <rect x="80" y="400" width="100" height="35" fill="#c8e6c9" stroke="#388e3c" rx="5"/>
  <text x="130" y="422" text-anchor="middle" font-size="11" fill="#1b5e20">传统认证</text>
  
  <rect x="200" y="400" width="100" height="35" fill="#c8e6c9" stroke="#388e3c" rx="5"/>
  <text x="250" y="422" text-anchor="middle" font-size="11" fill="#1b5e20">授权决策</text>
  
  <rect x="320" y="400" width="100" height="35" fill="#c8e6c9" stroke="#388e3c" rx="5"/>
  <text x="370" y="422" text-anchor="middle" font-size="11" fill="#1b5e20">令牌管理</text>
  
  <rect x="440" y="400" width="100" height="35" fill="#c8e6c9" stroke="#388e3c" rx="5"/>
  <text x="490" y="422" text-anchor="middle" font-size="11" fill="#1b5e20">会话管理</text>
  
  <rect x="560" y="400" width="100" height="35" fill="#c8e6c9" stroke="#388e3c" rx="5"/>
  <text x="610" y="422" text-anchor="middle" font-size="11" fill="#1b5e20">访问控制</text>
  
  <rect x="680" y="400" width="100" height="35" fill="#c8e6c9" stroke="#388e3c" rx="5"/>
  <text x="730" y="422" text-anchor="middle" font-size="11" fill="#1b5e20">API网关</text>
  
  <text x="80" y="455" font-size="10" fill="#2e7d32">• 传统认证授权 + DID集成</text>
  <text x="80" y="470" font-size="10" fill="#2e7d32">• 混合身份验证和统一访问控制</text>
  
  <!-- 资源平面 -->
  <rect x="50" y="510" width="800" height="130" fill="#fff3e0" stroke="#f57c00" stroke-width="2" rx="10"/>
  <text x="70" y="535" font-size="18" font-weight="bold" fill="#f57c00">资源平面 (Resource Plane)</text>
  
  <!-- 资源平面组件 -->
  <rect x="80" y="550" width="100" height="35" fill="#ffe0b2" stroke="#f57c00" rx="5"/>
  <text x="130" y="572" text-anchor="middle" font-size="11" fill="#e65100">资源注册</text>
  
  <rect x="200" y="550" width="100" height="35" fill="#ffe0b2" stroke="#f57c00" rx="5"/>
  <text x="250" y="572" text-anchor="middle" font-size="11" fill="#e65100">权限映射</text>
  
  <rect x="320" y="550" width="100" height="35" fill="#ffe0b2" stroke="#f57c00" rx="5"/>
  <text x="370" y="572" text-anchor="middle" font-size="11" fill="#e65100">智能合约</text>
  
  <rect x="440" y="550" width="100" height="35" fill="#ffe0b2" stroke="#f57c00" rx="5"/>
  <text x="490" y="572" text-anchor="middle" font-size="11" fill="#e65100">访问日志</text>
  
  <rect x="560" y="550" width="100" height="35" fill="#ffe0b2" stroke="#f57c00" rx="5"/>
  <text x="610" y="572" text-anchor="middle" font-size="11" fill="#e65100">Agent资源</text>
  
  <rect x="680" y="550" width="100" height="35" fill="#ffe0b2" stroke="#f57c00" rx="5"/>
  <text x="730" y="572" text-anchor="middle" font-size="11" fill="#e65100">链上资源</text>
  
  <text x="80" y="605" font-size="10" fill="#ef6c00">• 传统资源 + 链上资源 + Agent服务</text>
  <text x="80" y="620" font-size="10" fill="#ef6c00">• 智能合约集成和去中心化资源管理</text>
  
  <!-- 平面间的交互箭头 -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" 
     refX="0" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666" />
    </marker>
  </defs>
  
  <!-- 控制平面到身份平面 -->
  <line x1="350" y1="190" x2="350" y2="210" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="360" y="205" font-size="9" fill="#666">DID策略</text>
  
  <!-- 身份平面到数据平面 -->
  <line x1="450" y1="340" x2="450" y2="360" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="460" y="355" font-size="9" fill="#666">身份令牌</text>
  
  <!-- 数据平面到资源平面 -->
  <line x1="550" y1="490" x2="550" y2="510" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="560" y="505" font-size="9" fill="#666">访问请求</text>
  
  <!-- Agent间通信 -->
  <ellipse cx="150" cy="275" rx="20" ry="15" fill="#ffcdd2" stroke="#d32f2f" stroke-width="1"/>
  <text x="150" y="280" text-anchor="middle" font-size="9" fill="#c62828">Agent A</text>
  
  <ellipse cx="750" cy="275" rx="20" ry="15" fill="#ffcdd2" stroke="#d32f2f" stroke-width="1"/>
  <text x="750" y="280" text-anchor="middle" font-size="9" fill="#c62828">Agent B</text>
  
  <line x1="170" y1="275" x2="730" y2="275" stroke="#d32f2f" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead)"/>
  <text x="450" y="295" text-anchor="middle" font-size="9" fill="#d32f2f">DID互认证</text>
  
  <!-- 图例 -->
  <rect x="50" y="670" width="800" height="60" fill="#f5f5f5" stroke="#ccc" stroke-width="1" rx="5"/>
  <text x="70" y="690" font-size="14" font-weight="bold" fill="#333">架构特点：</text>
  <text x="70" y="710" font-size="11" fill="#555">• 身份平面：专门处理DID、Agent身份协商、去中心化信任建立</text>
  <text x="70" y="725" font-size="11" fill="#555">• 数据平面：集成传统认证与DID认证，提供统一访问控制</text>
</svg>